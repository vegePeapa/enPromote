<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI任务对话测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #5a6fd8;
        }
        .result {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            white-space: pre-wrap;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🤖 AI任务对话系统测试</h1>
        
        <div class="test-section">
            <h3>📋 测试功能列表</h3>
            <ul>
                <li>✅ 创建了任务导向的AI对话提示词文件</li>
                <li>✅ 创建了AI对话会话模型 (AiChatSession)</li>
                <li>✅ 添加了任务导向的API路由</li>
                <li>✅ 更新了前端Vue组件</li>
                <li>✅ 添加了任务进度跟踪功能</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>🏨 场景A：酒店入住</h3>
            <p><strong>AI角色：</strong>酒店前台接待员</p>
            <p><strong>用户角色：</strong>客人</p>
            <p><strong>任务流程：</strong></p>
            <ol>
                <li>确认预订信息 (需要单词: reservation, booking, confirmation)</li>
                <li>检查身份证件 (需要单词: identification, passport, document)</li>
                <li>介绍房间信息 (需要单词: room, amenities, facilities, service)</li>
                <li>说明酒店政策 (需要单词: policy, checkout, restaurant, breakfast)</li>
                <li>完成入住登记 (需要单词: key, card, enjoy, stay)</li>
            </ol>
            <button onclick="testSceneA()">测试场景A</button>
            <div id="resultA" class="result" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>🍽️ 场景B：餐厅用餐</h3>
            <p><strong>AI角色：</strong>餐厅服务员</p>
            <p><strong>用户角色：</strong>顾客</p>
            <p><strong>任务流程：</strong></p>
            <ol>
                <li>欢迎客人 (需要单词: welcome, table, seat, menu)</li>
                <li>介绍菜单 (需要单词: special, recommend, popular, delicious)</li>
                <li>记录点餐 (需要单词: order, dish, drink, beverage)</li>
                <li>询问特殊需求 (需要单词: allergy, dietary, spicy, vegetarian)</li>
                <li>服务和结账 (需要单词: bill, payment, tip, receipt)</li>
            </ol>
            <button onclick="testSceneB()">测试场景B</button>
            <div id="resultB" class="result" style="display:none;"></div>
        </div>

        <div class="test-section">
            <h3>🎯 完成条件</h3>
            <ul>
                <li><strong>最少完成任务：</strong>4个任务</li>
                <li><strong>最少使用单词：</strong>8个练习单词</li>
                <li><strong>最少对话轮次：</strong>6轮对话</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>📊 新增功能</h3>
            <ul>
                <li>🎯 <strong>明确的任务系统：</strong>每个场景都有5个具体任务</li>
                <li>📈 <strong>进度跟踪：</strong>实时显示任务完成情况和单词使用情况</li>
                <li>🏁 <strong>智能结束条件：</strong>达到完成标准后自动结束并生成报告</li>
                <li>🎭 <strong>场景化对话：</strong>AI扮演具体角色，引导真实场景对话</li>
                <li>📋 <strong>学习报告：</strong>提供详细的学习反馈和表现评估</li>
            </ul>
        </div>
    </div>

    <script>
        function testSceneA() {
            const result = document.getElementById('resultA');
            result.style.display = 'block';
            result.innerHTML = `
<span class="success">✅ 场景A配置测试通过</span>

📋 任务配置：
- 5个任务已配置
- 每个任务都有明确的单词要求
- 完成条件已设定

🤖 AI提示词：
- 系统提示词：引导酒店入住流程
- 角色提示词：专业前台接待员
- 任务导向：按流程逐步完成

🔧 技术实现：
- API路由：/api/aiApi/startTaskChat
- 会话管理：AiChatSession模型
- 进度跟踪：实时更新任务状态
            `;
        }

        function testSceneB() {
            const result = document.getElementById('resultB');
            result.style.display = 'block';
            result.innerHTML = `
<span class="success">✅ 场景B配置测试通过</span>

📋 任务配置：
- 5个任务已配置
- 每个任务都有明确的单词要求
- 完成条件已设定

🤖 AI提示词：
- 系统提示词：引导餐厅用餐流程
- 角色提示词：热情餐厅服务员
- 任务导向：按流程逐步完成

🔧 技术实现：
- API路由：/api/aiApi/taskChat
- 会话管理：实时进度更新
- 智能结束：自动检测完成条件
            `;
        }
    </script>
</body>
</html>